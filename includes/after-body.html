<script>
/* Verifica cookie setado pelo oauth2-proxy e esconde links para /book */
function hasCookie(name){
  return document.cookie.split(';').some(c => c.trim().startsWith(name + '='));
}
document.addEventListener('DOMContentLoaded', function(){
  const cookieName = '_oauth2_proxy';
  const isLogged = hasCookie(cookieName);
  document.querySelectorAll('a').forEach(a => {
    const href = a.getAttribute('href') || '';
    if(href.includes('/book')) {
      if(!isLogged) a.style.display = 'none';
    }
  });
  const loginLink = document.querySelector('a[href="/login"]');
  if(loginLink){
    loginLink.textContent = isLogged ? 'Minha Conta' : 'Login';
    // click login should go to /book which triggers oauth2-proxy
  }
});
</script>
